BasicGame = function (game) {
};

BasicGame.prototype = {
    init: function () {
    },
     preload:function(){
        game.load.image('bg',"img/lbbg.jpg");
        game.load.image('platform',"img/platform.png");
        game.load.spritesheet('player2','img/playerko.png',100,100);
        game.load.spritesheet('player','img/tao1.png',100,100);
        game.load.image('match','img/2.png');
        game.load.image('btnleft','img/p1.png');
        game.load.image('star','img/mangga.png');
        game.load.image('sky2','img/p2.png');
        game.load.image('gameover','img/refresh.png');
        game.load.image('bg7','img/bg7.png');
    game.load.audio('bgMusic', 'audio/bird.mp3');
    game.load.audio('yay', 'audio/clapping.mp3');
    game.load.audio('boo', 'audio/Boo.mp3');

    game.load.spritesheet('left', 'img/right.png');
    game.load.spritesheet('right', 'img/left.png');
    },

     create:function(){
        game.physics.startSystem(Phaser.Physics.ARCADE);
        game.world.setBounds(0,0,bounds,0);
        game.scale.scaleMode = Phaser.ScaleManager.EXACT_FIT;
        game.scale.forcePortrait = false;
        game.scale.forceLandscape = true;
        game.scale.pageAlignHorizontally = true;
        game.scale.pageAlignVertically = true;;
        game.scale.setScreenSize = true;
        keyboard = game.input.keyboard.createCursorKeys();

        game.add.image(0,0,'bg');
        platform = game.add.sprite(0,568,'platform');
        platform.scale.x=2;
        Leftbutton = game.add.button(650,370,'left',luksongBaka.pushJump2);
        Rightbutton = game.add.button(50,370,'right',luksongBaka.pushRight2);

        player = game.add.sprite(100,410,'player');
        player.animations.add('run',[1,0,2],9,true);
        player2 = game.add.sprite(0,610,'player2');
        player2.animations.add('run1',[1,0,2],9,true);
        match = game.add.sprite(350,400,'match');
        match.scale.y=0.75;
        star = game.add.sprite(650,500,'star');
        bg1 = game.add.tileSprite(0,
            game.height - game.cache.getImage('bg7').height,
            bounds,
            game.cache.getImage('bg7').height,'bg7');



        game.physics.arcade.enable(player);
        game.physics.arcade.enable(player2);
        // game.physics.arcade.enabled(platform);
        game.physics.arcade.enable(platform);
        game.physics.arcade.enable(match);
        game.physics.arcade.enable(star);

        platform.body.immovable = true;
        match.body.immovable = true;

        // platform.body.collideWorldBounds = true;
        player.body.collideWorldBounds = true;
        player.body.gravity.y=1000;
        player2.body.collideWorldBounds = true;
        player2.body.gravity.y=1000;
        match.body.collideWorldBounds = true;
        match.body.gravity.y=1000;

    scoreText = game.add.text(550,20,'PLAYER 1',{ fontSize: '30px', fill: 'purple' });
    scoreText2 = game.add.text(50,20,'PLAYER 2',{ fontSize: '30px', fill: 'purple' });

    scoreText = game.add.text(550,50,'Score: 0',{ fontSize: '20px', fill: 'purple' });
    scoreText2 = game.add.text(50,50,'Score: 0',{ fontSize: '20px', fill: 'purple' });
    lifeText = game.add.text(550,80,'life: 3',{ fontSize: '20px', fill: 'purple' });
    lifeText2 = game.add.text(50,80,'life: 3',{ fontSize: '20px', fill: 'purple' });

    
            yaymusic = game.add.audio('yay');
            boomusic = game.add.audio('boo');
            bgmusic = game.add.audio('bgMusic');
            bgmusic.play();
            luksongBaka.loopAudio(6000);
    },
     update:function(){
        game.physics.arcade.collide(player,platform);
        game.physics.arcade.collide(player2,platform);
        // game.physics.arcade.collide(player,match);
        game.physics.arcade.collide(platform,match);

        game.physics.arcade.overlap(player,star,luksongBaka.collectStar);
        game.physics.arcade.overlap(player2,star,luksongBaka.collectStar2);

        game.physics.arcade.overlap(player,match,luksongBaka.killMatch);
        game.physics.arcade.overlap(player2,match,luksongBaka.killMatch2);

        bg1.tilePosition.x -= 1;

    // if(keyboard.up.isDown && player.body.touching.down){
    //     player.body.velocity.y = -600;
    // }
    // else if(keyboard.right.isDown){
    //  player.body.velocity.x=400;
    // }
    // else{
    //  // player.body.velocity.x=0;
    // }
    }
};
game.state.add('Play', BasicGame, true);
        